

  
    
  


  





  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.46 with theme Tranquilpeak 0.4.3-BETA">
    <title>How To Deploy Your Node-React-Mongo App To Amazon Web Service</title>
    <meta name="author" content="Xiaoyun Yang">
    <meta name="keywords" content="AWS, Docker, DevOps, MERN">

    <link rel="icon" href="http://xiaoyunyang.github.io/favicon-96x96.png">
    

    
    <meta name="description" content="In this tutorial, I will provide a step-by-step guide for how to containerize your Mongo/Express/React/Node (MERN) app with Docker and deploy it to Amazon Web Service (AWS) Elastic Container Service (ECS). I will share my research and lessons learned deploying a MERN app, including what worked, what didn&rsquo;t work, how I prepared the app for deployment and accomplished the deployment.

">
    <meta property="og:description" content="In this tutorial, I will provide a step-by-step guide for how to containerize your Mongo/Express/React/Node (MERN) app with Docker and deploy it to Amazon Web Service (AWS) Elastic Container Service (ECS). I will share my research and lessons learned deploying a MERN app, including what worked, what didn&rsquo;t work, how I prepared the app for deployment and accomplished the deployment.

">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="How To Deploy Your Node-React-Mongo App To Amazon Web Service">
    <meta property="og:url" content="http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
    <meta property="og:site_name" content="Xiaoyun Yang">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Xiaoyun Yang">
    <meta name="twitter:description" content="In this tutorial, I will provide a step-by-step guide for how to containerize your Mongo/Express/React/Node (MERN) app with Docker and deploy it to Amazon Web Service (AWS) Elastic Container Service (ECS). I will share my research and lessons learned deploying a MERN app, including what worked, what didn&rsquo;t work, how I prepared the app for deployment and accomplished the deployment.

">
    
    

    
    

    
      <meta property="og:image" content="http://xiaoyunyang.github.io/post/images/deployapp/docker-on-aws.png">
    
    
    

    
      <meta property="og:image" content="http://xiaoyunyang.github.io/images/xyang.png">
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="http://xiaoyunyang.github.io/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="http://xiaoyunyang.github.io/css/custom.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="http://xiaoyunyang.github.io/">Xiaoyun Yang</a>
  </div>
  
    
      <a class="header-right-picture "
         href="http://xiaoyunyang.github.io/#about">
    
    
    
      
        <img class="header-picture" src="http://xiaoyunyang.github.io/images/xyang.png" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="http://xiaoyunyang.github.io/#about">
          <img class="sidebar-profile-picture" src="http://xiaoyunyang.github.io/images/xyang.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Xiaoyun Yang</h4>
        
          <h5 class="sidebar-profile-bio">Software Engineer. Entrepreneur.</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="http://xiaoyunyang.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="http://xiaoyunyang.github.io/categories/projects">
    
      <i class="sidebar-button-icon fa fa-lg fa-code"></i>
      
      <span class="sidebar-button-desc">Projects</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="http://xiaoyunyang.github.io/categories/blog">
    
      <i class="sidebar-button-icon fa fa-lg fa-pencil"></i>
      
      <span class="sidebar-button-desc">Blog</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="http://xiaoyunyang.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="http://xiaoyunyang.github.io/about">
    
      <i class="sidebar-button-icon fa fa-lg fa-user"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="https://github.com/xiaoyunyang" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="https://medium.com/@xiaoyunyang" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-medium"></i>
      
      <span class="sidebar-button-desc">Medium</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="https://linkedin.com/in/xiaoyun-yang" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
     
      <a class="sidebar-button-link " href="https://angel.co/xiaoyunyang" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-angellist"></i>
      
      <span class="sidebar-button-desc">AngelList</span>
    </a>
  </li>

  <li class="sidebar-button">
     
     <a class="sidebar-button-link " href="mailto:xiaoyun@looseleafapp.com" rel="noopener">
     
      <i class="sidebar-button-icon fa fa-lg fa-envelope"></i>
      
      <span class="sidebar-button-desc">Email Me</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      How To Deploy Your Node-React-Mongo App To Amazon Web Service
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-10-03T00:00:00Z">
        
  October 3, 2018

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="http://xiaoyunyang.github.io/categories/blog">blog</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>In this tutorial, I will provide a step-by-step guide for how to containerize your Mongo/Express/React/Node (MERN) app with Docker and deploy it to Amazon Web Service (AWS) Elastic Container Service (ECS). I will share my research and lessons learned deploying a MERN app, including what worked, what didn&rsquo;t work, how I prepared the app for deployment and accomplished the deployment.</p>

<p></p>

<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
<ul>
<li><a href="#prep-app-for-deployment">Prep App for Deployment</a>
<ul>
<li><a href="#step-1-optimize-build">Step 1: Optimize Build</a></li>
<li><a href="#step-2-automate-scripts">Step 2: Automate scripts</a></li>
<li><a href="#step-3-dockerize-your-app">Step 3: Dockerize Your App</a></li>
</ul></li>
<li><a href="#deploy-docker-image-to-aws-ecs">Deploy Docker Image to AWS ECS</a></li>
<li><a href="#following-deployment">Following Deployment</a>
<ul>
<li><a href="#add-ssl">Add SSL</a></li>
<li><a href="#create-load-balancer">Create Load Balancer</a></li>
<li><a href="#link-to-domain-name">Link to Domain Name</a></li>
</ul></li>
<li><a href="#gotchas">Gotchas</a>
<ul>
<li><a href="#image-proliferation">Image Proliferation</a></li>
<li><a href="#aws-elastic-beanstalk">AWS Elastic Beanstalk</a></li>
<li><a href="#using-mongo-shell-via-container">Using Mongo Shell Via Container</a></li>
<li><a href="#useful-commands">Useful Commands</a></li>
</ul></li>
</ul>
</nav>

<p><img src="http://xiaoyunyang.github.io/post/images/deployapp/docker-on-aws.png" alt="https://cloudonaut.io/aws-velocity-containerized-ecs-based-app-ci-cd-pipeline/" /></p>

<h1 id="prep-app-for-deployment">Prep App for Deployment</h1>

<h2 id="step-1-optimize-build">Step 1: Optimize Build</h2>

<p>I have an isomorphic app which leverages webpack with code splitting.</p>

<p>The motivation for optimizing production build is twofold: increase performance and decrease build time and size.</p>

<p>When running the webpack build script in production mode, the following warning messages are provided:</p>

<blockquote>
<p>WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).
This can impact web performance.</p>
</blockquote>

<p>and</p>

<blockquote>
<p>WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.
Entrypoints:</p>
</blockquote>

<p><a href="https://developers.google.com/web/fundamentals/performance/webpack/decrease-frontend-size" target="_blank">Google Web Fundamentals</a> for decreasing frontend size provides a few strategies for decreasing the size and build time of your production app bundles, including using url-loader, utilizing css-loader with the minimize option, making sure you use the &ndash;production flag when building your production bundles, and a few optimizations your can include in your webpack configuration file. These optimizations provide marginal improvements. But through my other research, it became apparent that the splitChunks plugin is a necessary optimization, especially if you use a lot of big node modules like react and your app is set up with code splitting.</p>

<p>According to the <a href="https://webpack.js.org/guides/code-splitting/" target="_blank">Webpack docs</a>, Code splitting has a pitfall in which common vendor code used in all your bundles are duplicated in your bundles. This makes all your bundles big and increases overall build time. We can remove the duplicated modules with the <a href="https://itnext.io/react-router-and-webpack-v4-code-splitting-using-splitchunksplugin-f0a48f110312" target="_blank">splitChunksPlugin</a>. To use this optimization, add the following to your webpack.config.js:</p>

<pre><code class="language-javascript">// webpack.config.js
module.exports = {
  mode: // ...
  entry: // ...
  output: // ...
  optimization: {
    splitChunks: {
      cacheGroups: {
        default: false,
        vendors: false,
        vendor: {
          name: 'vendor',
          chunks: 'all',
          test: /node_modules/
        }
      }
    }
  }
}
</code></pre>

<p>

 
  
  
  
  
    
  
    
      
    
  

<div class="figure fig-50" >
  
    <a class="fancybox" href="http://xiaoyunyang.github.io/post/images/deployapp/webpack-no-optimization.png" title="Webpack Build without optimization" data-fancybox-group="">
  
    <img class="fig-img" src="http://xiaoyunyang.github.io/post/images/deployapp/webpack-no-optimization.png"  alt="Webpack Build without optimization">
  
    </a>
  
   
    <span class="caption">Webpack Build without optimization</span>
  
</div>


 
  
  
  
  
    
      
    
  
    
      
    
  
    
  

 
  
  
  
  
    
  
    
      
    
  

<div class="figure fig-50" >
  
    <a class="fancybox" href="http://xiaoyunyang.github.io/post/images/deployapp/webpack-with-optimization.png" title="Webpack Build with optimization" data-fancybox-group="">
  
    <img class="fig-img" src="http://xiaoyunyang.github.io/post/images/deployapp/webpack-with-optimization.png"  alt="Webpack Build with optimization">
  
    </a>
  
   
    <span class="caption">Webpack Build with optimization</span>
  
</div>

  <div style="clear:both;"></div>
</p>

<h2 id="step-2-automate-scripts">Step 2: Automate scripts</h2>

<p>I added a few npm run scripts in order to allow different ways of spinning up the servers.</p>

<pre><code class="language-javascript">// package.json
{
  &quot;name&quot;: &quot;looseleaf-node&quot;,
  &quot;private&quot;: true,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;scripts&quot;: {
    &quot;build:prod&quot;: &quot;./node_modules/.bin/webpack --mode production&quot;,
    &quot;build:dev&quot;: &quot;./node_modules/.bin/webpack --mode development&quot;,
    &quot;prestart&quot;: &quot;npm run build:prod&quot;,
    &quot;start&quot;: &quot;node server/run-prod.js&quot;,
    &quot;start-server&quot;: &quot;node server/run-prod.js&quot;,
    &quot;start-server-dev&quot;: &quot;nodemon server/run-dev.js --watch server --watch client/iso-middleware --watch client/src&quot;,
    &quot;start-client&quot;: &quot;node server/start-client.js&quot;,
    &quot;start-dev&quot;: &quot;concurrently \&quot;npm run start-server-dev\&quot; \&quot;npm run start-client\&quot;&quot;,
  },
  &quot;dependencies&quot;: {
    // ...
  }
}
</code></pre>

<p>Since <code>npm prestart</code> is always executed with <code>npm start</code>, we want to create a separate run script for when we just want to fire up our server without rebuilding bundles. Thus, <code>start-server</code> was added.</p>

<p>Additionally, we want a version which can be used to spin up servers with <code>nodemon</code> and concurrently run our isomorphic app on one server (<code>npm run start-server</code>) and create-react-app with hot module reload and react hot loader on another server.</p>

<p>Note, start-client is defined in another file:</p>

<pre><code class="language-javascript">// start-client.js
const args = ['start'];
const opts = { stdio: 'inherit', cwd: 'client', shell: true };
require('child_process').spawn('npm', args, opts);
</code></pre>

<h2 id="step-3-dockerize-your-app">Step 3: Dockerize Your App</h2>

<p><a href="https://www.codementor.io/collections/aws-ecs-lbxm7zj38" target="_blank">Gokce Yalcin</a> provides a great primer for Docker and ECS.</p>

<blockquote>
<p>Docker is a way to manage and run containers - it is an abstraction that lets you share host resources with your application by process isolation.</p>
</blockquote>

<p>The motivation for Docker is portability. Apps come with a lot of environmental configurations that would run on one computer but break on another computer which does not have the right configuration.</p>

<p>As <a href="https://cloudacademy.com/blog/amazon-ec2-container-service-docker-aws/" target="_blank">this article puts it</a>:</p>

<blockquote>
<p>modern DevOps practices demand the ability to quickly build servers and ship code to be run in different environments. Welcome to the world of containers: extremely lightweight, abstracted user space instances that can be easily launched on any compatible server and reliably provide a predictable experience.</p>
</blockquote>

<p>For our MERN app, the environmental configuration is our mongo database.</p>

<p>A lot of tutorials I found show you how to create container for simple apps which do not depend on other images like mongo. The build definition provided by <code>Dockerfile</code> was not adequate in associating the app build with mongo. The app ends up failing upon initial launch due to failing to .</p>

<p>To dockerize our MERN app for running locally, we need to create two files: <strong>Dockerfile</strong> and <strong>docker-compose.yml</strong>.</p>

<p>Dockerfile is required if you want to use Docker to containerize your app but docker-compose is optional but useful if you want to fire up a Docker container locally to use Mongodb.</p>

<p>Before when I run the server locally, I&rsquo;d have to make sure to run <code>mongod</code> and <code>mongo</code> in the command line to fire up the  mongo daemon and mongo shell.</p>

<p>But with containerization, I can create an image that includes the app and the mongodb image and driver mapping that the app depends on.</p>

<p><strong>Dockerfile</strong>:</p>

<pre><code>FROM node:8.11.1

# Set image metadata
LABEL version=&quot;1.0&quot;
LABEL description=&quot;LooseLeaf Node&quot;

# Create app directory
WORKDIR /usr/src/app

# install dependencies
COPY package*.json ./
RUN npm cache clean --force &amp;&amp; npm install


# copy app source to image _after_ npm install so that
# application code changes don't bust the docker cache of npm install step
COPY . .

# set application PORT and expose docker PORT, 80 is what Elastic Beanstalk expects
EXPOSE 3001

CMD [ &quot;npm&quot;, &quot;run&quot;, &quot;start&quot; ]
</code></pre>

<p><strong>docker-compose.yml</strong></p>

<pre><code>version: &quot;2&quot;
services:
  web:
    container_name: looseleaf-node-app
    build: .
    ports:
      - &quot;3001:3001&quot;
    depends_on:
      - mongo
  mongo:
    container_name: mongo
    image: mongo:latest
    ports:
      - &quot;27017:27017&quot;
    volumes:
      - data-volume:/data/db
volumes:
  data-volume:
</code></pre>

<p>To run both our app and mongo in the container, we run this command:</p>

<pre><code>$ docker-compose up
</code></pre>

<h1 id="deploy-docker-image-to-aws-ecs">Deploy Docker Image to AWS ECS</h1>

<p><a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html" target="_blank">The official docs from Amazon</a> provides  detailed information on how AWS ECS leverages Docker.</p>

<blockquote>
<p>Amazon ECS uses Docker images in task definitions to launch containers on EC2 instances in your clusters.</p>
</blockquote>

<p>I find AWS&rsquo;s docs overwhelming because it always contains more information than necessary and not enough examples. I suggest following <a href="https://node.university/blog/978472/aws-ecs-containers" target="_blank">this tutorial from Node University</a> which walks you through (with screenshot) an actual example deploying a node app containerized with mongo to ECS.</p>

<p>In short, we need to take the following steps:</p>

<ol>
<li>Create EC2 Container Registry.</li>
<li>Create a repository under Amazon ECS. This is where you push your docker images using the aws cli.</li>
<li>Create new task definition, which includes port mapping and your two containers (node app and mongodb).</li>
<li>Create a Cluster. A Cluster is where AWS runs containers. I use EC2 instance type m4.large.</li>
<li>Create a Service.</li>
</ol>

<p>For all these steps, you can use Amazon&rsquo;s console and AWS CLI.</p>

<ul>
<li>Note: There&rsquo;s an open source cli called <a href="https://github.com/coldbrewcloud/coldbrew-cli" target="_blank">coldbrew</a> that you can download from Github which automates your Docker container deployment process. I couldn&rsquo;t figure out how the configuration file suppose to look if I wanted to fire up the app container with mongo. Also, Coldbrew seem to have a lot of &ldquo;magic&rdquo; that when my deployed app failed to launch, I couldn&rsquo;t figure out how to troubleshoot.</li>
</ul>

<p>As step 0, we need to <a href="https://docs.aws.amazon.com/cli/latest/userguide/installing.html" target="_blank">install AWS CLI</a> and configure it.</p>

<p>Next, we use the Docker CLI to build our image:</p>

<pre><code>$ docker build -t &lt;image-name&gt; .
</code></pre>

<p>Don&rsquo;t forget the &ldquo;dot&rdquo; at the end of the command.</p>

<p>Then tag our built image and use the Docker CLI to push the image to our AWS ECS repository. You use two commands which you can copy-paste into your Terminal from the AWS ECS console.</p>

<p>For example:</p>

<p><img src="http://xiaoyunyang.github.io/post/images/deployapp/aws-ecs-repo.png" alt="AWS ECS Repo" /></p>

<p><img src="http://xiaoyunyang.github.io/post/images/deployapp/aws-ecs-commands.png" alt="AWS ECS Repo" /></p>

<p>Before you push, make sure to to authenticate Docker to an Amazon ECR registry with get-login.</p>

<pre><code>$ aws ecr get-login
</code></pre>

<p>For our example, the complete sequence of commands for first and subsequent deploys is:</p>

<pre><code>$ docker build -t looseleaf-node .
$ aws ecr get-login
$ docker tag looseleaf-node:latest 767822753727.dkr.ecr.us-east-1.amazonaws.com/looseleaf-node:latest
$ docker push 767822753727.dkr.ecr.us-east-1.amazonaws.com/looseleaf-node:latest
</code></pre>

<h1 id="following-deployment">Following Deployment</h1>

<h2 id="add-ssl">Add SSL</h2>

<p>The <a href="https://aws.amazon.com/blogs/aws/new-aws-certificate-manager-deploy-ssltls-based-apps-on-aws/" target="_blank">AWS Tutorial</a> guides you through setting up your <a href="https://aws.amazon.com/certificate-manager/" target="_blank">AWS Certificate Manager</a>.</p>

<blockquote>
<p>SSL/TLS certificates are used to secure network communications and establish the identity of websites over the Internet as well as resources on private networks.</p>
</blockquote>

<p>SL/TLS certificates provisioned through AWS Certificate Manager are free.</p>

<p>The AWS Tutorial linked above is a little out-dated.</p>

<p>Steps:</p>

<ol>
<li>Login to your AWS Console and click to Services &gt; Certificate Manager.</li>
<li>Get started on Provision Certificates.</li>
<li>Request a Public Certificate.</li>
<li>On the domain names, add your domain name (e.g., <code>looseleafapp.com</code> and <code>*.looseleafapp.com</code>). Click next.</li>
<li>Validation method: DNS.</li>
<li>On the review page, click &ldquo;Confirm and request&rdquo; once you are satisfied.</li>
<li>On the Validation page, use Amazon Route 53 to validate CNAME for you. If everything goes well, you&rsquo;ll get this message:</li>
</ol>

<blockquote>
<p>The DNS record was written to your Route 53 hosted zone. It can take 30 minutes or longer for the changes to propagate and for AWS to validate the domain and issue the certificate.</p>
</blockquote>

<p>It doesn&rsquo;t take 30 minutes. I refreshed the page and Validation status changed to Success.</p>

<h2 id="create-load-balancer">Create Load Balancer</h2>

<p>If you haven&rsquo;t set up your service with elastic load balancer, do that. Go to ECS console &gt; Clusters &gt; click on the name of your cluster &gt; under services tab, click &ldquo;Create&rdquo;.</p>

<ul>
<li>Launch type: EC2</li>
<li>Choose Task definition and Revision from the dropdown.</li>
<li>Choose Cluster from the Dropdown.</li>
<li>Service type: REPLICA</li>
<li>Number of tasks: 1</li>
<li>Load balancer type: choose Classic. You get a warning that No load balancer is found. Click the link to create a load balancer in the EC2 Console. Check out <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-create-https-ssl-load-balancer.html" target="_blank">AWS official tutorial</a> for how to create a classic Load Balancer with an HTTPS Listener.<br />
<a href="https://www.youtube.com/watch?v=E5MYky95atE" target="_blank">This video</a> is helpful.</li>
</ul>

<blockquote>
<p>The Network Load Balancer is the best option for managing secure traffic as it provides support for TCP traffic pass through, without decrypting and then re-encrypting the traffic. ~<a href="https://aws.amazon.com/blogs/compute/maintaining-transport-layer-security-all-the-way-to-your-container-using-the-network-load-balancer-with-amazon-ecs/" target="_blank">AWS Compute Blog</a></p>
</blockquote>

<p><img src="http://xiaoyunyang.github.io/post/images/deployapp/ecs-diagram-1.png" alt="https://aws.amazon.com/blogs/compute/maintaining-transport-layer-security-all-the-way-to-your-container-using-the-network-load-balancer-with-amazon-ecs/" /></p>

<h2 id="link-to-domain-name">Link to Domain Name</h2>

<p>Use AWS Route 53 to associate your ECS instance with a domain name.</p>

<p>I purchased my domain name from Google Domains. I got on chat with the customer service representative from Google Domains who walked me through how to set up route for AWS Route 53.</p>

<h1 id="gotchas">Gotchas</h1>

<h2 id="image-proliferation">Image Proliferation</h2>

<ul>
<li>Everytime you run <code>docker-compose up</code>, you are building a new image. These images could be more than a gigabite in size. I wasn&rsquo;t aware that these images are being built and retained after I <code>ctrl+c</code> from the docker process. Quickly my hard drive was running low on memory. Make sure you delete outdated images with the following lines of commands:</li>
</ul>

<p>List containers</p>

<pre><code>$ docker ps -a
</code></pre>

<p>Remove containers by id</p>

<pre><code>$ docker rm &lt;CONTAINER ID&gt;
</code></pre>

<p>List images</p>

<pre><code>$ docker images
</code></pre>

<p>Remove images</p>

<pre><code>$ docker rmi &lt;IMAGE ID&gt;
</code></pre>

<p>Make sure to run <code>docker rm</code> to delete the containers before removing the images. Otherwise, you&rsquo;ll get this error:</p>

<blockquote>
<p>Error response from daemon: conflict: unable to delete 3d2765b2fe31 (must be forced) - image is being used by stopped container 5ee892b7f037</p>
</blockquote>

<h2 id="aws-elastic-beanstalk">AWS Elastic Beanstalk</h2>

<h2 id="using-mongo-shell-via-container">Using Mongo Shell Via Container</h2>

<pre><code>$ docker run -it -d mongo
592a2dfdcffd8a2c59615800eace1e922ba5e88bb836eaf11c06e06278112ed9

$ docker ps

CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                            NAMES
592a2dfdcffd        mongo                        &quot;docker-entrypoint.s…&quot;   8 seconds ago       Up 7 seconds        27017/tcp                        cranky_chebyshev

$ docker exec -it cranky_chebyshev bash
root@592a2dfdcffd:/#
# docker stop cranky_chebyshev
# docker rm cranky_chebyshev
</code></pre>

<h2 id="useful-commands">Useful Commands</h2>

<p>See which process is running in port 3000, then kill that process.</p>

<pre><code>$ lsof -i tcp:3000
$ kill &lt;PID&gt;
</code></pre>

<p>Kill all mongo servers</p>

<pre><code>$ lsof -i | grep mongo
~$ lsof -i | grep mongo
mongod    19557 xiaoyun   10u  IPv4 0x6b9c9aebc1dd3e63      0t0  TCP localhost:27017 (LISTEN)
mongod    19557 xiaoyun   32u  IPv4 0x6b9c9aebdea763e3      0t0  TCP localhost:27017-&gt;localhost:56383 (ESTABLISHED)
mongod    19557 xiaoyun   34u  IPv4 0x6b9c9aebe1fafe63      0t0  TCP localhost:27017-&gt;localhost:56370 (ESTABLISHED)
mongod    19557 xiaoyun   35u  IPv4 0x6b9c9aebadd5c3e3      0t0  TCP localhost:27017-&gt;localhost:56385 (ESTABLISHED)
mongod    19557 xiaoyun   37u  IPv4 0x6b9c9aebe97b1123      0t0  TCP localhost:27017-&gt;localhost:56389 (ESTABLISHED)
mongo     19569 xiaoyun    7u  IPv4 0x6b9c9aebdde83e63      0t0  TCP localhost:56370-&gt;localhost:27017 (ESTABLISHED)
$ kill 19557
</code></pre>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://xiaoyunyang.github.io/tags/devops/">DevOps</a>

  <a class="tag tag--primary tag--small" href="http://xiaoyunyang.github.io/tags/web-app/">Web App</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://xiaoyunyang.github.io/post/web-developer-playbook-rich-text-editor/" data-tooltip="Web Developer Playbook: Rich Text Editor">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/";  
this.page.identifier = "How To Deploy Your Node-React-Mongo App To Amazon Web Service"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://http-xiaoyunyang-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Xiaoyun Yang. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://xiaoyunyang.github.io/post/web-developer-playbook-rich-text-editor/" data-tooltip="Web Developer Playbook: Rich Text Editor">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fxiaoyunyang.github.io%2Fpost%2Fhow-to-deploy-your-node-react-mongo-app-to-amazon-web-service%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http%3A%2F%2Fxiaoyunyang.github.io%2Fpost%2Fhow-to-deploy-your-node-react-mongo-app-to-amazon-web-service%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3A%2F%2Fxiaoyunyang.github.io%2Fpost%2Fhow-to-deploy-your-node-react-mongo-app-to-amazon-web-service%2F">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="http://xiaoyunyang.github.io/images/xyang.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Xiaoyun Yang</h4>
    
      <div id="about-card-bio">Software Engineer. Entrepreneur.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Washington DC
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service/">
                <h3 class="media-heading">How To Deploy Your Node-React-Mongo App To Amazon Web Service</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>In this tutorial, I will provide a step-by-step guide for how to containerize your Mongo/Express/React/Node (MERN) app with Docker and deploy it to Amazon Web Service (AWS) Elastic Container Service (ECS). I will share my research and lessons learned deploying a MERN app, including what worked, what didn&rsquo;t work, how I prepared the app for deployment and accomplished the deployment.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/web-developer-playbook-rich-text-editor/">
                <h3 class="media-heading">Web Developer Playbook: Rich Text Editor</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>In this article, I will show you add a rich text editor based on <a href="https://draftjs.org/" target="_blank">Draft.js</a> to your web app. This post is part of the Web Developer Playbook series, created to provide examples, best practice, and suggestions for designing and building web services. I will be using libraries from the JavaScript ecosystem (e.g., Node.js, React.js) in all my examples.
<img src="http://xiaoyunyang.github.io/post/images/projects/draftjs.png" alt="draftjs" /></p>

<p>Let&rsquo;s get started!</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/dont-quit-your-job-to-be-an-entrepreneur.-bootstrap./">
                <h3 class="media-heading">Don&#39;t Quit Your Job To Be An Entrepreneur. Bootstrap.</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>People have different reasons to want to quit their 9-5 to pursue entrepreneurship full time. I was drawn to the opportunity to take something from idea to product and being able to “be my own boss”. We all want the lifestyle of a successful entrepreneur but you don’t need to have your own VC funded startup to build a great product.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/web-developer-playbook-slug/">
                <h3 class="media-heading">Web Developer Playbook: Slug</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><img src="http://xiaoyunyang.github.io/post/images/webdev-manual-cover.png" alt="" />
This post is part of the Web Developer Playbook series, which are created to provide examples, best practice, and suggestions for designing and building web services. I will be using libraries from the JavaScript ecosystem (e.g., Node.js, React.js) in all my examples.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/getting-started-with-career-pivot-with-looseleaf/">
                <h3 class="media-heading">Getting Started With Career Pivot With LooseLeaf</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>This documents the market research I&rsquo;ve completed for my startup, <a href="http://xiaoyunyang.github.io/post/creating-looseleaf-a-platform-to-support-the-future-of-work/">LooseLeaf</a>. This is a long and exhaustive market research. There&rsquo;s a <a href="http://xiaoyunyang.github.io/post/getting-started-with-startup-seed-funding/#pre-submittal-feedback-optional">TL;DR version of the value proposition</a>.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/data-structure-with-javascript-object-linked-list/">
                <h3 class="media-heading">Data Structure with JavaScript Object: Linked List</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Linked list is like an array but more flexible. Elements in an array are stored contiguously in memory while linked lists are stored as nodes with two fields: current value and a pointer to the next thing in the list. We are going to implement linked list in JavaScript and go over some algorithms with the linked list.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/algos-to-practice-whiteboarding-for-the-coding-interview/">
                <h3 class="media-heading">Algos to Practice Whiteboarding for The Coding Interview</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>We are going to go over a set of coding and whiteboard problems that would be asked during a coding interview. I&rsquo;m drawing these problems from <a href="https://leetcode.com/" target="_blank">LeetCode</a> and <a href="https://www.amazon.com/Cracking-Coding-Interview-Programming-Questions/dp/0984782850/ref=pd_lpo_sbs_14_t_0?_encoding=UTF8&amp;psc=1&amp;refRID=2E72V7DJM4CV4DNTBTKD" target="_blank">Cracking the Coding Interview</a>. They are a sample of the medium and hard problems that require a bit of thinking and and familiarity with some fundamental data structures in computer science.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/serverless-web-app-for-work/">
                <h3 class="media-heading">Serverless Web App For Work</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>When I work at my federal job on a close intranet network, we often had to access information from different databases and filesystems through custom or share point websites which did not have the best user interface. It was a pain point for me and many of my colleagues. I decided to make a set of single page applications (SPAs) with nicer UX for querying the databases and file systems.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/the-coding-interview-what-to-expect/">
                <h3 class="media-heading">The Coding Interview: What to Expect</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Being great at coding interviews doesn&rsquo;t necessarily make you a great developer and being a great developer doesn&rsquo;t necessarily make you great at interviews. However, you need to pass the interview to get the job. Most tech companies, public or startups, have started drawing from the same pool of interview material, adopted the same set of coding challenges and problems for candidates to solve. Coding interviews can be challenging and stressful, but with enough practice, research, and preparation, it can be very manageable.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://xiaoyunyang.github.io/post/so-you-wanna-be-a-gopher-eh/">
                <h3 class="media-heading">So You Wanna Be A Gopher Eh?</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Go is becoming pretty mainstream. Every job posting I&rsquo;ve seen recently requires Go as a want-to-have or a need-to-have skill. Here&rsquo;s a guide to help you hit the ground running with Go.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         28 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://xiaoyunyang.github.io/images/cover-blue.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="http://xiaoyunyang.github.io/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'http:\/\/xiaoyunyang.github.io\/post\/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service\/';
          
            this.page.identifier = '\/post\/how-to-deploy-your-node-react-mongo-app-to-amazon-web-service\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'http-xiaoyunyang-github-io';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

